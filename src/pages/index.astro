---
import Layout from "~/layouts/Layout.astro";
import Menus from "@modals/Menus.svelte";
import Footer from "@sections/Footer.astro";
import { getEntry, getCollection } from "~/content.config";
import { generateServiceSchema } from "~/build/schemas/service";

const data = (await getEntry("index", "index")).data;
const services = await getCollection("services");
---

<Layout
  title={data.title}
  desc={data.desc}
  sections={data.sections}
  schemas={{
    "@type": "ItemList",
    numberOfItems: services.length,
    itemListElement: services.map((service) =>
      generateServiceSchema(Astro, service),
    ),
  }}
>
  <Menus client:idle />
  <Footer />
</Layout>
