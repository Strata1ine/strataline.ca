---
import Layout from "~/layouts/Layout.astro";
import Menus from "@modals/Menus.svelte";
import Footer from "@sections/Footer.astro";
import { getEntry, getCollection } from "~/content.config";
import { generateServiceSchema } from "~/build/schemas/service";

const index = await getEntry("index", "index");

const services = await getCollection("services");
---

<Layout
  title={index.data.title}
  desc={index.data.desc}
  sections={index.data.sections}
  schemas={{
    "@type": "ItemList",
    numberOfItems: services.length,
    itemListElement: services.map((service) =>
      generateServiceSchema(Astro, service),
    ),
  }}
>
  <Menus client:idle />
  <Footer />
</Layout>
