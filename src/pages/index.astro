---
import Layout from "~/layouts/Layout.astro";
import Content from "~/build/Content.astro";
import Menus from "@modals/Menus.svelte";
import Footer from "@sections/Footer.astro";
import { getEntry, getCollection } from "~/content.config";

const index = await getEntry("index", "index");
---

<Layout
  title={index.data.title}
  desc={index.data.desc}
  schemas={{
    "@type": "OfferCatalog",
    itemListElement: (await getCollection("services")).map((service) => ({
      "@type": "Offer",
      "@id": `${Astro.url.origin}/${service.id.split("/")[0]}#offer`,
      itemOffered: {
        "@type": "Service",
        name: service.data.title,
        serviceType: "Home Renovation",
        description: service.data.desc,
        image: service.data.covers.map((cover) => ({
          "@type": "ImageObject",
          url: `${Astro.url.origin}${cover.meta.src}`,
          description: cover.alt,
        })),
      },
    })),
  }}
>
  <Content startPos="right" components={index.data.components} />
  <Menus client:idle />
  <Footer />
</Layout>
