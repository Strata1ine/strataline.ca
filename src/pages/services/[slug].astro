---
import Layout from "~/layouts/Layout.astro";
import Service from "@sections/Service.astro";
import Menus from "@modals/Menus.svelte";

import { getCollection } from "~/content.config";
import Content from "~/build/Content.astro";

export async function getStaticPaths() {
  return (await getCollection("services")).map((service: any) => ({
    params: { slug: service.id.split("/")[0] },
  }));
}

const { slug } = Astro.params;
const service = (await getCollection("services")).find(
  (s) => s.id.split("/")[0] === slug,
)!;
---

<Layout>
  <Service meta={service.data} />
      <Content startPos="left" components={service.data.components} />
  <Menus client:idle />
</Layout>
