---
import { containerStyles } from "./styles";
import { marked } from "marked";
import LayoutDivider from "./layout/Divider.astro";
import LayoutTitle from "./layout/Title.astro";
import Island from "./Review.svelte";

import { type PropsOf } from "./registry";
import { getNextPos } from "~/build/pos";
const meta = Astro.props as PropsOf<"Review">;

const pos = getNextPos();
for (const review of meta.reviews) {
  review.markdown = marked.parseInline(review.markdown) as string;
}
---

<LayoutDivider id={meta.id}>
  <LayoutTitle title={meta.title} {pos} />
  <div class="contain-paint">
    <div class=`${containerStyles({ width: "inner" })} select-none`>
      <Island client:visible meta={meta.reviews} />
    </div>
  </div>
</LayoutDivider>
