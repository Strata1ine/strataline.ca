---
import { containerStyles } from "./styles";
import { marked } from "marked";
import LayoutDivider from "./layout/Divider.astro";
import LayoutTitle from "./layout/Title.astro";
import Island from "./Review.svelte";

import { type PropsOf } from "./registry";
const meta = Astro.props as PropsOf<"Review">;

const pos = Astro.locals.getNextPos();
const reviews = meta.reviews.map((review) => ({
  ...review,
  markdown: marked.parseInline(review.markdown),
}));
---

<LayoutDivider id={meta.id}>
  <LayoutTitle title={meta.title} {pos} />
  <div class="contain-paint">
    <div class=`${containerStyles({ width: "inner" })} select-none`>
      <Island client:visible meta={reviews} />
    </div>
  </div>
</LayoutDivider>
