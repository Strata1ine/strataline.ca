---
import clsx from "clsx";
import { parseHTML } from "linkedom";

const { class: customClass } = Astro.props;

const html = await Astro.slots.render("default");
const { document } = parseHTML(html);

const images = document.querySelectorAll("img");

images.forEach((img, index) => {
  let classes = "object-cover w-full h-full absolute";
  if (index !== 0) {
    classes = `${classes} hidden`;
  } else {
    img.setAttribute("loading", "eager");
  }

  img.setAttribute("class", clsx(classes));
});
---

<div class={clsx(customClass)}>
  <Fragment set:html={document} />
</div>
