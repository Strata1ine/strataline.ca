---
import { parseHTML } from "linkedom";
import { appendAttrElements, minmaxBloat } from "~/util/processHTML";
import Button from "~/components/buttons/Button.astro";

const { title, description } = Astro.props;
const { document } = parseHTML(await Astro.slots.render("default"));

const images = document.querySelectorAll("img");

minmaxBloat(images, 0);
appendAttrElements(images, "class", "min-w-0 object-cover h-full");
---

<div
  data-slideshow-card
  class="min-h-130 gap-6 rounded-sm p-5 contain-paint sm:min-h-110 sm:p-0 xl:gap-7 2xl:gap-9"
>
  <div class="hidden w-1/2 sm:flex">
    <Fragment set:html={document} />
  </div>

  <div class="flex flex-1 flex-col justify-center">
    <h4 class="mb-2 font-serif text-3xl font-semibold text-balance">
      {title}
    </h4>

    <div class="mt-1 mb-3 flex h-50 rounded-sm contain-paint sm:hidden">
      <Fragment set:html={document} />
    </div>

    <p class="font-sans text-base">{description}</p>

    <div class="mt-8">
      <Button href="#wasd">Watch The Video</Button>
    </div>
  </div>
  <div class="hidden sm:block"></div>
</div>
