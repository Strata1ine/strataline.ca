---
import { type SchemaOf, createSchema } from 'astro-frontmatter-components';
import { type SchemaContext, z } from 'astro:content';
import { DefaultPos, media } from '@/schemas';

export const schema = createSchema((c: SchemaContext) => ({
	id: z.string().optional(),
	pos: DefaultPos,
	title: z.string(),
	speed: z.number().default(5.0),
	content: z.array(
		z.object({
			title: z.string(),
			desc: z.string(),
			id: z.string().optional(),
			media: media(c),
			link: z
				.object({
					name: z.string(),
					url: z.string(),
				})
				.optional(),
		}),
	),
}));

export type Props = SchemaOf<typeof schema>;
const meta = Astro.props as Props;

import * as Layout from '@/components/Layout';
import Island from './Cardshow';
---

<Layout.Divider id={meta.id}>
	<Layout.Title title={meta.title} pos={meta.pos} />

	<Layout.Container variant="outer" class="flex flex-col 2xl:flex-row">
		<Island client:visible meta={meta.content} speed={meta.speed} />
	</Layout.Container>
</Layout.Divider>
