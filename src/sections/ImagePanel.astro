---
import type { SchemaOf } from 'astro-frontmatter-components';
import { type SchemaContext, z } from 'astro:content';
import { image, DefaultPos } from '@/schemas';

export const schema = (c: SchemaContext) => ({
	id: z.string().optional(),
	pos: DefaultPos,
	title: z.string(),
	content: z.array(
		z.object({
			title: z.string(),
			image: z.object(image(c)),
		}),
	),
});

export type Props = SchemaOf<typeof schema>;
const meta = Astro.props;

import Image from '@/components/Image';
import Divider from './layout/Divider.astro';
import Title from './layout/Title.astro';
import Container from './layout/Container.astro';
---

<Divider>
	<Title title={meta.title} pos={meta.pos} />

	<Container width="outer" class="flex flex-wrap justify-center gap-10 sm:gap-8">
		{
			meta.content.map((panel, _) => {
				return (
					<div class="flex flex-col items-center gap-4 sm:max-w-1/2 sm:flex-[40%] xl:max-w-1/3 xl:flex-[30%]">
						<div class="h-70 rounded-sm contain-paint md:h-95">
							<Image image={panel.image} widths={[300, 462, 924]} />
						</div>

						<h3 class="heading-2xl font-semibold">{panel.title}</h3>
					</div>
				);
			})
		}
	</Container>
</Divider>
